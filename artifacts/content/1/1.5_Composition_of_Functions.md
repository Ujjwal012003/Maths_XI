## 1.5 Composition of Functions

<figure style="display: flex; flex-direction: column; align-items: center;">
<img src="https://lh3.googleusercontent.com/d/placeholder" alt="Composition of Two Functions Illustration" style="max-width: 90%; height: auto;">
<figcaption style="text-align: center; margin-top: 8px;"><i><b>Figure 1.5.1:</b> Visual understanding of composition of two functions \(f\) and \(g\).</i></figcaption>
</figure>

### 1.5.1 Definition and Notation

**Introduction**

In mathematics, we often combine functions to create more complex functions. One fundamental way to do this is through **composition** â€” applying one function to the result of another. Intuitively, if you think of functions as machines that transform inputs, composition means feeding the output of one machine into another.

**Formal Definition**

Let \(f: A \to B\) and \(g: B \to C\) be two functions. The **composition** of \(g\) with \(f\), denoted by \(g \circ f\), is a function from \(A\) to \(C\) defined as:

$$
(g \circ f)(x) = g(f(x)) \quad \forall x \in A
$$

**Domain and Range:**

- The domain of \(g \circ f\) is the set of all \(x \in A\) such that \(f(x) \in \text{Domain}(g)\).
- The range of \(g \circ f\) is a subset of the range of \(g\).

**Geometric Meaning**

Geometrically, the graph of \(g \circ f\) can be interpreted as follows:

- For an input \(x\), locate the point on the graph of \(f\) at \((x, f(x))\).
- Then apply \(g\) to the output \(f(x)\) to get \(g(f(x))\).
- Thus, the graph of \(g \circ f\) shows \(x\) mapped directly to \(g(f(x))\), combining the two transformations into one.

Consider the visualization as two arrows: \(x \to f(x) \to g(f(x))\), collapsing into one arrow \(x \to g(f(x))\).

<figure style="display: flex; flex-direction: column; align-items: center;">
<img src="https://lh3.googleusercontent.com/d/placeholder" alt="Graphical interpretation of function composition" style="max-width: 90%; height: auto;">
<figcaption style="text-align: center; margin-top: 8px;"><i><b>Figure 1.5.2:</b> Graphical meaning of \(g \circ f\): input \(x\) maps to \(f(x)\), then \(g(f(x))\).</i></figcaption>
</figure>

---

### 1.5.2 Domain and Range of Composite Functions

**Determining the domain of \(g \circ f\):**

Since \((g \circ f)(x) = g(f(x))\), for this expression to be defined,

1. \(x\) must lie in the domain of \(f\).
2. The output \(f(x)\) must lie in the domain of \(g\).

Thus, the domain of \(g \circ f\) is:

$$
\text{Domain}(g \circ f) = \{ x \in \text{Domain}(f) \mid f(x) \in \text{Domain}(g) \}
$$

**Determining the range of \(g \circ f\):**

- The range of \(g \circ f\) consists of all values \(g(y)\) where \(y\) is in the range of \(f\) **and** \(y\) is in the domain of \(g\).
- Formally,

$$
\text{Range}(g \circ f) \subseteq \text{Range}(g)
$$

**Special Notes:**

- If \(g\) is defined for every element of the range of \(f\), then \(\text{Domain}(g \circ f) = \text{Domain}(f)\).
- Otherwise, the domain must be restricted accordingly.

---

### 1.5.3 Theorems and Proofs on Composition of Functions

**Theorem 1: Associativity of Composition**

\[
\boxed{
h \circ (g \circ f) = (h \circ g) \circ f
}
\]

*Where \(f: A \to B\), \(g: B \to C\), and \(h: C \to D\).*

**Proof:**

- Consider any \(x \in A\).
- Compute \(h \circ (g \circ f)(x)\):

  $$
  h((g \circ f)(x)) = h(g(f(x))).
  $$

- Compute \((h \circ g) \circ f(x)\):

  $$
  (h \circ g)(f(x)) = h(g(f(x))).
  $$

- Since both functions produce the same output \(h(g(f(x)))\) for every \(x \in A\), the functions are equal pointwise.

**Hence,**

$$
h \circ (g \circ f) = (h \circ g) \circ f.
$$

---

**Theorem 2: Injectivity of Composition**

\[
\boxed{
\text{If } f \text{ and } g \text{ are injective, then } g \circ f \text{ is injective.}
}
\]

**Proof:**

- Suppose \(g \circ f(x_1) = g \circ f(x_2)\) for \(x_1, x_2 \in A\).
- Then,

  $$
  g(f(x_1)) = g(f(x_2)).
  $$

- Since \(g\) is injective, it follows that:

  $$
  f(x_1) = f(x_2).
  $$

- Since \(f\) is also injective, it follows that:

  $$
  x_1 = x_2.
  $$

- Hence, \(g \circ f\) is injective.

---

**Theorem 3: Surjectivity of Composition**

\[
\boxed{
\text{If } f: A \to B \text{ and } g: B \to C \text{ are surjective, then } g \circ f \text{ is surjective.}
}
\]

**Proof:**

- For every \(c \in C\), since \(g\) is surjective, there exists \(b \in B\) such that:

  $$
  g(b) = c.
  $$

- Since \(f\) is surjective, there exists \(a \in A\) such that:

  $$
  f(a) = b.
  $$

- Then,

  $$
  (g \circ f)(a) = g(f(a)) = g(b) = c.
  $$

- Thus, for every \(c \in C\), there exists \(a \in A\) with \((g \circ f)(a) = c\).

- Hence, \(g \circ f\) is surjective.

---

### 1.5.4 Formulas and Working Rule (Algorithm)

**Key Formulas:**

$$
(g \circ f)(x) = g(f(x)),
$$

$$
\text{Domain}(g \circ f) = \{x \in \text{Domain}(f) : f(x) \in \text{Domain}(g)\},
$$

$$
\text{Range}(g \circ f) \subseteq \text{Range}(g).
$$

---

**Working Rule (Algorithm) to find \(g \circ f\):**

1. **Identify** the functions \(f\) and \(g\).
2. **Determine** the domain of \(f\).
3. **Calculate** the range (image) of \(f\).
4. **Check** if the range of \(f\) fits within the domain of \(g\); restrict domain of \(f\) if necessary.
5. **Write** the composite function as \(g(f(x))\).
6. **Simplify** the expression.
7. **Find** the exact domain of the composite by applying all domain restrictions.
8. **Optionally, find** the range of the composite function.

---

### 1.5.5 Graded Solved Examples

---

**Example 1 (Concept Building - Basic):**

Given \(f(x) = 2x + 3\) and \(g(x) = x^2\), find \((g \circ f)(x)\) and its domain.

---

**Solution:**

**Step 1:** Write the composite function definition:

$$
(g \circ f)(x) = g(f(x)).
$$

**Step 2:** Substitute \(f(x)\):

$$
g(f(x)) = g(2x + 3) = (2x + 3)^2.
$$

**Step 3:** Since both \(f\) and \(g\) are polynomials, their domains are \(\mathbb{R}\).

**Step 4:** Thus the domain of \(g \circ f\) is \(\mathbb{R}\).

**Answer:**

$$
(g \circ f)(x) = (2x + 3)^2, \quad \text{Domain}: \mathbb{R}.
$$

---

**Example 2 (Competency Based):**

Let 

$$
f(x) = \frac{1}{x - 2} \quad \text{with domain } \mathbb{R} \setminus \{2\},
$$

and 

$$
g(x) = \sqrt{x + 3} \quad \text{with domain } [-3, \infty).
$$

Find the composite function \((g \circ f)(x)\) and its domain.

---

**Solution:**

**Step 1:** Express the composite function:

$$
(g \circ f)(x) = g(f(x)) = \sqrt{\frac{1}{x-2} + 3}.
$$

**Step 2:** Determine the domain conditions:

- \(x \neq 2\) (domain of \(f\)).
- The expression inside the square root must be non-negative:

$$
\frac{1}{x-2} + 3 \geq 0.
$$

**Step 3:** Solve the inequality:

$$
\frac{1}{x-2} + 3 \geq 0 \implies \frac{1 + 3(x - 2)}{x - 2} \geq 0.
$$

Simplify numerator:

$$
1 + 3x - 6 = 3x - 5.
$$

The inequality becomes:

$$
\frac{3x - 5}{x - 2} \geq 0.
$$

---

**Step 4:** Identify critical points where numerator or denominator is zero: \(x = \frac{5}{3}\) and \(x = 2\).

Create a sign chart:

- For \(x < \frac{5}{3}\):

  - Numerator \(3x - 5 < 0\),
  - Denominator \(x - 2 < 0\),
  - Negative / Negative = Positive.

- For \(\frac{5}{3} < x < 2\):

  - Numerator \(3x - 5 > 0\),
  - Denominator \(x - 2 < 0\),
  - Positive / Negative = Negative.

- For \(x > 2\):

  - Numerator > 0,
  - Denominator > 0,
  - Positive / Positive = Positive.

---

**Step 5:** The inequality \(\geq 0\) holds where fraction is positive or zero.

- Fraction equals zero only when the numerator is zero: \(x = \frac{5}{3}\) (included).
  
Thus solution intervals:

$$
(-\infty, \frac{5}{3}] \cup (2, \infty).
$$

---

**Step 6:** Combine with domain condition \(x \neq 2\), the domain of the composite is:

$$
\left(-\infty, \frac{5}{3}\right] \cup (2, \infty).
$$

**Answer:**

$$
(g \circ f)(x) = \sqrt{\frac{1}{x-2} + 3}, \quad \text{Domain} = \left(-\infty, \frac{5}{3}\right] \cup (2, \infty).
$$

---

**Example 3 (HOTS - Higher Order Thinking Skills):**

If 

\[
f(x) = \frac{x-1}{x+1}, \quad x \neq -1,
\]
and
\[
g(x) = \frac{2x +3}{x - 2}, \quad x \neq 2,
\]
find \((g \circ f)(x)\), simplify it, and determine its domain.

---

**Solution:**

**Step 1:** Write the composition:

$$
(g \circ f)(x) = g(f(x)) = \frac{2 \cdot \frac{x-1}{x+1} + 3}{\frac{x-1}{x+1} - 2}.
$$

---

**Step 2:** Simplify numerator:

$$
2 \cdot \frac{x-1}{x+1} + 3 = \frac{2(x-1)}{x+1} + \frac{3(x+1)}{x+1} = \frac{2(x-1) + 3(x+1)}{x+1}.
$$

Calculate numerator:

$$
2x - 2 + 3x + 3 = 5x + 1.
$$

So numerator is:

$$
\frac{5x + 1}{x+1}.
$$

---

**Step 3:** Simplify denominator:

$$
\frac{x-1}{x+1} - 2 = \frac{x-1}{x+1} - \frac{2(x+1)}{x+1} = \frac{x-1 - 2(x+1)}{x+1}.
$$

Calculate numerator:

$$
x - 1 - 2x - 2 = -x -3.
$$

So denominator is:

$$
\frac{-x - 3}{x+1}.
$$

---

**Step 4:** Substitute back:

$$
g(f(x)) = \frac{\frac{5x +1}{x+1}}{\frac{-x -3}{x+1}} = \frac{5x +1}{x+1} \times \frac{x+1}{-x -3} = \frac{5x + 1}{-x -3}.
$$

---

**Step 5:** Rewrite denominator:

$$
- x - 3 = -(x + 3).
$$

Thus,

$$
g(f(x)) = \frac{5x + 1}{-(x + 3)} = - \frac{5x + 1}{x + 3}.
$$

---

**Step 6:** Determine domain conditions:

- \(f(x)\) is defined for \(x \neq -1\).
- \(g(y)\) is defined for \(y \neq 2\), so require:

$$
f(x) \neq 2 \implies \frac{x - 1}{x + 1} \neq 2.
$$

Solve for \(x\):

$$
\frac{x -1}{x +1} \neq 2 \implies x -1 \neq 2(x +1) \implies x -1 \neq 2x + 2.
$$

Simplify:

$$
x - 1 \neq 2x + 2 \implies -x \neq 3 \implies x \neq -3.
$$

- Also, to avoid division by zero in \(g(f(x))\), denominator cannot be zero:

$$
x + 3 \neq 0 \implies x \neq -3.
$$

- Finally, \(x + 1 \neq 0 \implies x \neq -1\).

---

**Step 7:** The domain of the composite function is

$$
\{ x \in \mathbb{R} : x \neq -1, \; x \neq -3 \}.
$$

---

**Answer:**

$$
(g \circ f)(x) = - \frac{5x + 1}{x + 3}, \quad x \neq -1, \quad x \neq -3.
$$

---

### Summary

- Composition involves applying one function to the result of another.
- The domain of the composite depends on both functions.
- Associativity holds for composition.
- Injectivity and surjectivity can be inferred under certain conditions.
- Always check for domain restrictions carefully, especially when functions involve fractions or roots.

---

# End of Section 1.5 Composition of Functions